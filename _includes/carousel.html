<div class="carousel" data-carousel>

  <!-- LEFT ARROW -->
  <button class="carousel-arrow left-arrow" data-arrow="left">‹</button>

  <!-- SCROLLING STRIP -->
  <div class="horizontal-strip" data-strip>

    {% assign items = include.playlist | default: include.songs %}

    {% for item in items %}
      {% assign clean_url = item.url | replace: '//', '/' %}
      {% assign segments = clean_url | split: "/" %}
      {% assign last = segments | last %}
      {% if last == "" %}
        {% assign song_id = segments[segments.size - 2] %}
      {% else %}
        {% assign song_id = last %}
      {% endif %}

      {% assign song = site.songs | where: "song_id", song_id | first %}

      {% if include.playlist %}
        <!-- PLAYLIST PAGE MODE — NO NAVIGATION -->
        <div class="carousel-tile" data-song="{{ song.song_id }}">
          <img src="{{ item.image }}" alt="{{ song.title }}">
          <h3 class="tile-title">{{ song.title }}</h3>
        </div>
      {% else %}
        <!-- SONG PAGE MODE — NAVIGATION -->
        <a class="carousel-tile" data-song="{{ song.song_id }}" href="{{ item.url }}">
          <img src="{{ item.image }}" alt="{{ song.title }}">
          <h3 class="tile-title">{{ song.title }}</h3>
        </a>
      {% endif %}

    {% endfor %}
  </div>

  <!-- RIGHT ARROW -->
  <button class="carousel-arrow right-arrow" data-arrow="right">›</button>

</div>
