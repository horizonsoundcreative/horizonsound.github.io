<!DOCTYPE html>
<html lang="en">
<head>
  <script>
    window.__REPO_NAME__ = "{{ site.github.repository_name }}";
  </script>
  
  <!-- ENV DEBUG: [{{ site.github.repository_name }}] -->
  {% if site.github.repository_name == "horizonsound-dev" %}
    <!-- dev-only -->
    <meta name="robots" content="noindex, nofollow">
  {% endif %}

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const robotsMeta = document.querySelector('meta[name="robots"]');
      const repo = window.__REPO_NAME__;

      if (robotsMeta) {
        const content = robotsMeta.getAttribute('content');
        if (content.includes('noindex') && repo !== "horizonsound-dev") {
          document.documentElement.style.background = "blue";
          document.body.style.background = "blue";
        }
      }
    });
  </script>
  
  <meta charset="UTF-8" />
  <title>{{ page.title }}</title>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-JFDRHKE5CW"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-JFDRHKE5CW');
  </script>

  <link rel="stylesheet" href="/style-v2.css?v=0" />
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      if (window.isPlaylistPage) return; // â† Skip global behavior on playlist page
    
      const tiles = document.querySelectorAll(".carousel-tile, .playlist-tile");
      const iframe = document.querySelector(".video-wrapper iframe");
    
      if (!tiles.length) return;
    
      tiles.forEach(tile => {
          tile.addEventListener("click", () => {
      
          console.log("Clicked tile:", tile.dataset.song);
      
          const songId = tile.dataset.song;
          const song = window.allSongs?.find(s => s.song_id === songId);
      
          console.log("Matched song:", song);
      
          if (iframe && song?.youtube_id) {
            iframe.src = "https://www.youtube.com/embed/" + song.youtube_id;
          }
      
          tiles.forEach(t => t.classList.remove("active"));
          tile.classList.add("active");
        });
      });
    });
  </script>
</head>
<body>
  {% include header.html %}
  {% include hero.html %}

  <main>
    {{ content }}
  </main>

  {% include footer.html %}
</body>
</html>
