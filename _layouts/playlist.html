---
layout: default
---

{% assign playlist = site.data.music.songs | where: "primary_playlist", page.playlist_id %}
{% assign playlist_public = playlist | where: "videostatus", "Public" %}
{% assign playlist_sorted = playlist_public | sort: "sequence" %}

<main>
  {% if site.debug %}
  <div class="debug-block">
    <pre style="background:#111; color:#0ff; padding:1rem; margin:1rem 0; white-space:pre-wrap;">
  
  PLAYLIST PAGE DEBUG
  ==============================
  
  PAGE OBJECT
  -----------
  page.url:          {{ page.url }}
  page.title:        {{ page.title }}
  page.playlist_id:  {{ page.playlist_id }}
  
  RAW SONG DATA (from music.yml)
  ------------------------------
  Total songs in site.data.music.songs: {{ site.data.music.songs | size }}
  
  FILTERED SONGS (primary_playlist == page.playlist_id)
  ------------------------------------------------------
  {{ playlist | jsonify }}
  
  PUBLIC ONLY (videostatus == "Public")
  -------------------------------------
  {{ playlist_public | jsonify }}
  
  SORTED PLAYLIST (final list for carousel)
  -----------------------------------------
  {{ playlist_sorted | jsonify }}
  
    </pre>
  </div>
  {% endif %}

  <!-- PLAYLIST TITLE -->
  <section class="playlist-header">
    <h2 class="section-header">{{ page.title }}</h2>
    {% if page.subtitle %}
      <p class="playlist-subtitle">{{ page.subtitle }}</p>
    {% endif %}
  </section>

  <!-- EMBED -->
  {% assign first_song = playlist_sorted | first %}
  {% include embed.html youtube_id=first_song.youtube_id %}

  <!-- CAROUSEL -->
  <script>
    window.allSongs = {{ playlist_sorted | jsonify }};
  </script>

  {% include carousel.html playlist=playlist_sorted %}

</main>
